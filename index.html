<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download Notes</title>
    <style>
        body { font-family: Arial, sans-serif; }
        select { margin: 10px; }
        .files { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Select Your Class and Subject</h1>

    <label for="class">Class:</label>
    <select id="class" onchange="updateSubjects()">
        <option value="">--Select Class--</option>
        <option value="9th-class">9th Class</option>
        <option value="10th-class">10th Class</option>
        <option value="11th-class">11th Class</option>
        <option value="12th-class">12th Class</option>
    </select>

    <label for="subject">Subject:</label>
    <select id="subject" onchange="loadFiles()">
        <option value="">--Select Subject--</option>
    </select>

    <div class="files" id="file-list"></div>

    <script>
        const subjects = {
            "9th-class": ["English", "Hindi", "Punjabi", "Social Studies", "Science", "Maths"],
            "10th-class": ["English", "Hindi", "Punjabi", "Social Studies", "Science", "Maths"],
            "11th-class": ["English", "Punjabi", "Mathematics", "Chemistry", "Physics", "Biology", "Accounts", "Economics", "Political Science"],
            "12th-class": ["English", "Punjabi", "Mathematics", "Chemistry", "Physics", "Biology", "Accounts", "Economics", "Political Science"]
        };

        function updateSubjects() {
            const classSelect = document.getElementById("class");
            const subjectSelect = document.getElementById("subject");
            const selectedClass = classSelect.value;

            // Clear existing subjects
            subjectSelect.innerHTML = '<option value="">--Select Subject--</option>';

            if (selectedClass) {
                subjects[selectedClass].forEach(subject => {
                    const option = document.createElement("option");
                    option.value = subject;
                    option.textContent = subject;
                    subjectSelect.appendChild(option);
                });
            }
        }

        function loadFiles() {
            const classSelect = document.getElementById("class").value;
            const subjectSelect = document.getElementById("subject").value;
            const fileListDiv = document.getElementById("file-list");

            if (classSelect && subjectSelect) {
                fetchFiles(classSelect, subjectSelect)
                    .then(files => {
                        // Clear previous file list
                        fileListDiv.innerHTML = '';

                        if (files.length > 0) {
                            files.forEach(file => {
                                const link = document.createElement("a");
                                link.href = file.download_url; // URL to download
                                link.textContent = file.name; // Display file name
                                link.target = "_blank"; // Open in a new tab
                                fileListDiv.appendChild(link);
                                fileListDiv.appendChild(document.createElement("br"));
                            });
                        } else {
                            fileListDiv.innerHTML = 'No files found.';
                        }
                    });
            } else {
                fileListDiv.innerHTML = '';
            }
        }

        async function fetchFiles(className, subject) {
            const url = `https://api.github.com/repos/DEEPAKMATHUR0/Shikshak/contents/notes/${className}/${subject}`; // GitHub API URL
            const response = await fetch(url);
            const files = await response.json();
            const pdfFiles = files.filter(file => file.name.endsWith('.pdf')); // Filter for PDF files
            return pdfFiles; // Return only PDF files
        }
    </script>
</body>
</html>
